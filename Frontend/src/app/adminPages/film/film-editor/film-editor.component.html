<div class="dashboard-content">
	<div class="row">
		<div class="col-lg-12">
			<div id="add-listing">
				<!-- Section -->
				<div class="add-listing-section mb-4">
					<!-- Headline -->
					<div class="add-listing-headline">
						<h3>Basic Informations</h3>
					</div>
					<!-- Title -->
					<div class="row with-forms">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Title</label>
							<div class="form-group">
								<input type="text" class="form-control form-control-alternative" [(ngModel)]="filmToSave.title">
							</div>
						</div>
					</div>
					<!-- Description -->
					<div class="row with-forms">
						<div class="col-md-12">
							<div class="form-group">
								<!-- TODO: move style to css -->
								<label style="margin-left:10px;">Description</label>
								<textarea class="form-control form-control-alternative" rows="3" [(ngModel)]="filmToSave.description"></textarea>
							</div>
						</div>
					</div>
					<!-- Type -->
					<div class="row with-forms" *ngIf="types">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Type</label>
							<select class="custom-select form-control-alternative mb-3" [(ngModel)]="filmToSave.typeId" name="type">
								<option *ngFor="let type of types" [value]="type.id">{{type.name}}</option>
							</select>
						</div>
					</div>
					<!-- Country -->					
					<div class="row with-forms" *ngIf="countries">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Country</label>
							<select class="custom-select form-control-alternative mb-3" [(ngModel)]="filmToSave.countryId" name="country">
								<option *ngFor="let country of countries" [value]="country.id">{{country.name}}</option>
							</select>
						</div>
					</div>
					<!-- Language -->
					<div class="row with-forms" *ngIf="languages">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Language</label>
							<select class="custom-select form-control-alternative mb-3" [(ngModel)]="filmToSave.languageId" name="language">
								<option *ngFor="let language of languages" [value]="language.id">{{language.name}}</option>
							</select>
						</div>
					</div>
					<!-- Genres -->
					<div class="row with-forms" *ngIf="genres">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Genre</label>
							<select multiple class="custom-select form-control-alternative mb-3" [(ngModel)]="filmToSave.genreIds" name="genre">
								<option *ngFor="let genre of genres" [ngValue]="genre.id">{{genre.name}}</option>
							</select>
						</div>
					</div>
					<!-- Year -->
					<div class="row with-forms">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Year</label>
							<div class="form-group">
								<input type="text" class="form-control form-control-alternative" [(ngModel)]="filmToSave.year">
							</div>
						</div>
					</div>
					<!-- Duration -->
					<div class="row with-forms">
						<div class="col-md-12">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Duration</label>
							<div class="form-group">
								<input type="text" class="form-control form-control-alternative" [(ngModel)]="filmToSave.duration">
							</div>
						</div>
					</div>
					<!-- Participants -->
					<div class="row with-forms" *ngFor="let participant of filmToSave.participantsRoles; let i = index">
						<div class="col-md-5">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Person</label>
							<select class="custom-select form-control-alternative mb-3" #personId (change)="updateParticipant(i, personId.selectedIndex-1)">
								<option value=""></option>
								<option 
									*ngFor="let person of persons"
									[selected]="person.id == participant.participantId"
									[ngValue]="person.id"
									>{{person.name}}
								</option>
							</select>
						</div>
						<div class="col-md-5">
							<!-- TODO: move style to css -->
							<label style="margin-left:10px;">Role</label>
							<select class="custom-select form-control-alternative mb-3" #roleId (change)="updateParticipantRole(i, roleId.selectedIndex-1)">
								<option value=""></option>
								<option 
									*ngFor="let filmRole of filmRoles"
									[selected]="filmRole.id == participant.roleId"
									[ngValue]="filmRole.id"
									>{{filmRole.name}}
								</option>
							</select>
						</div>
						<!-- TODO: move style to css -->
						<div style="padding-top: 30px;" class="col-md-1">
							<button class="btn btn-primary" (click)="addEmptyParticipant()">Add</button>
						</div>
						<!-- TODO: move style to css -->
						<div style="padding-top: 30px;" class="col-md-1">
							<button 
								class="btn btn-danger" 
								(click)="removeParticipant(i)" 
								[disabled]="filmToSave.participantsRoles.length == 1"
							>Remove
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row" *ngIf="film && film['id']">
		<div class="col-lg-12">
			<div id="add-listing">
				<!-- Section -->
				<div class="add-listing-section mb-4">
					<!-- Headline -->
					<div class="add-listing-headline">
						<h3>Photos</h3>
					</div>
					<!-- Photos -->
					<app-photo-editor [entityTypeId]="entityTypeId" [entityId]="film['id']" [photos]="filmToSave.photos"></app-photo-editor>					
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12 col-sm-12">
			<button 
				class="btn btn-primary" 
				type="button" 
				[disabled]="!filmToSave.title||!filmToSave.description||!filmToSave.year||!filmToSave.duration||!filmToSave.typeId||!filmToSave.countryId||!filmToSave.languageId||filmToSave.genreIds.length == 0||!areParticipantsValid()"
				(click)="save()"
			>Save
			</button>
			<button 
				class="btn btn-secondary"
				type="button"
				[routerLink]="['/admin/film-list']"
			>Cancel
			</button>
		</div>
	</div>
</div>